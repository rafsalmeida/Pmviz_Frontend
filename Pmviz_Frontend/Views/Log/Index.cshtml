@model IEnumerable<Pmviz_Frontend.Models.Log>
@using Kendo.Mvc.UI
@{ Layout = "_Layout"; ViewBag.Title = "All Logs";}
@(Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(l => l.Id).Title("Id").HtmlAttributes(new { @id="id"}).Width(130);
        columns.Bound(l => l.Description).Title("Description").Width(130);
        columns.Bound(l => l.Filename).Title("Filename").Width(130);
        columns.Bound(l => l.NumberOfActivities).Title("Number of Activities").Width(130);
        columns.Bound(l => l.NumberOfCases).Title("Number of Cases").Width(130);
        columns.Bound(l => l.StartDate).Title("Start Date").Width(130);
        columns.Bound(l => l.EndDate).Title("End Date").Width(130);
        columns.Command(command => command.Custom("Details").Click("showDetails")).Width(130);
        columns.Command(command => command.Custom("Activities").Click("showActivities")).Width(130);
        columns.Command(command => command.Custom("Resources").Click("showResources")).Width(130);


    })
    .Pageable()
    .Navigatable()
    .Sortable()
    .Groupable()
    .Filterable()
    .Scrollable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(20)
        .ServerOperation(false)
     )
)
@(Html.Kendo().Button()
.Name("backButton")
.HtmlAttributes(new { type = "button", @class = "k-primary" })
.Content("Go back")
.Events(e => e.Click("onClick_GoBack")))

<script type="text/javascript">
    function onClick_GoBack() {
        window.location = '@Url.Action("Back", "Log")';
    }


    function showDetails(e) {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        window.location = '@Url.Action("Index","Activity")?id=' + dataItem.Id
        
    }

    function showActivities(e) {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        window.location = '@Url.Action("Activities","Log")?id=' + dataItem.Id
        
    }

    function showResources(e) {
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        window.location = '@Url.Action("Resources","Log")?id=' + dataItem.Id
        
    }

</script>




